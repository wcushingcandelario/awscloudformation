- name: Configure IAM roles
  cloudformation:
    stack_name: ovc-iam-config
    state: present
    region: "{{ customer_region }}"
    template: "account/iam.yaml"

- name: Configure Cloud Trail
  cloudformation:
    stack_name: aws-cloud-trail
    state: present
    region: "{{ customer_region }}"
    template: "account/configurations/config.yaml"

- name: Configure Confi Monitor
  cloudformation:
    stack_name: aws-config-monitor
    state: present
    region: "{{ customer_region }}"
    template: "account/configurations/cloudtrail.yaml"

- name: Add POS Application
  cloudformation:
    stack_name: pos-application
    state: present
    region: "{{ customer_region }}"
    template: "applications/pos/application/pos.yaml"

- name: Add Dashboard Application
  cloudformation:
    stack_name: pos-application
    state: present
    region: "{{ customer_region }}"
    template: "applications/dashboard/application/dashboard.yaml"

- name: Add Promotion Engine Application
  cloudformation:
    stack_name: pos-application
    state: present
    region: "{{ customer_region }}"
    template: "applications/promotion_engine/application/promotion_engine_application.yaml"

- name: Add Inventory Manager Application
  cloudformation:
    stack_name: pos-application
    state: present
    region: "{{ customer_region }}"
    template: "applications/inventory_manager/application/inventory_manager_application.yaml"
