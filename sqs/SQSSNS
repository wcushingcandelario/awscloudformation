AWSTemplateFormatVersion: '2010-09-09'
Description: Creates the SNS topic, SQS queue and instance that will service

Resources:
  MyQueue1:
    Type: "AWS::SQS::Queue"
    Properties:
      QueueName: "SampleQueue"
  MyQueue2:
    Type: "AWS::SQS::Queue"
    Properties:
      QueueName: "SampleQueue1"
  MyQueue3:
    Type: "AWS::SQS::Queue"
    Properties:
      QueueName: "SampleQueue2"


  MySNSTopic:
    Type: "AWS::SNS::Topic"
    Properties:
            DisplayName: String
            Subscription:
              -
                Endpoint:
                  Fn::GetAtt:
                    - "MyQueue1"
                    - "Arn"
                Protocol: "sqs"
              -
                Endpoint:
                  Fn::GetAtt:
                    - "MyQueue2"
                    - "Arn"
                Protocol: "sqs"
              -
                Endpoint:
                  Fn::GetAtt:
                    - "MyQueue3"
                    - "Arn"
                Protocol: "sqs"
            TopicName: "SampleTopic"
